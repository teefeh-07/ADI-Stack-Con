{"version":3,"file":"modal.js","sourceRoot":"","sources":["../../../src/components/modal/modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Prop, h } from '@stencil/core';\nimport { WbipProvider } from '../../providers';\nimport CloseIcon from './assets/close-icon.svg';\nimport { getBrowser, getPlatform } from './utils';\n\n@Component({\n  tag: 'connect-modal',\n  styleUrl: 'modal.css',\n  assetsDirs: ['assets'],\n  shadow: true,\n})\nexport class Modal {\n  @Prop() defaultProviders: WbipProvider[];\n  @Prop() installedProviders: WbipProvider[];\n\n  @Prop() callback: Function;\n  @Prop() cancelCallback: Function;\n\n  @Element() modalEl: HTMLConnectModalElement;\n\n  handleSelectProvider(providerId: string) {\n    this.callback(providerId);\n  }\n\n  handleCloseModal() {\n    this.cancelCallback();\n  }\n\n  // todo: nice to have:\n  // getComment(provider: WebBTCProvider, browser: string, isMobile?: string) {\n  //   if (!provider) return null;\n\n  //   const hasExtension = this.getBrowserUrl(provider);\n  //   const hasMobile = this.getMobileUrl(provider);\n\n  //   if (isMobile && hasExtension && !hasMobile) return 'Extension Only';\n  //   if (!isMobile && !hasExtension && hasMobile) return 'Mobile Only';\n\n  //   if (!isMobile && !browser) return 'Current browser not supported';\n\n  //   return null;\n  // }\n\n  getBrowserUrl(provider: WbipProvider) {\n    return provider.chromeWebStoreUrl ?? provider.mozillaAddOnsUrl;\n  }\n\n  getMobileUrl(provider: WbipProvider) {\n    return provider.iOSAppStoreUrl ?? provider.googlePlayStoreUrl;\n  }\n\n  getInstallUrl(provider: WbipProvider, browser: string, platform: string) {\n    if (platform === 'IOS') {\n      return provider.iOSAppStoreUrl ?? this.getBrowserUrl(provider) ?? provider.webUrl;\n    } else if (browser === 'Chrome') {\n      return provider.chromeWebStoreUrl ?? this.getMobileUrl(provider) ?? provider.webUrl;\n    } else if (browser === 'Firefox') {\n      return provider.mozillaAddOnsUrl ?? this.getMobileUrl(provider) ?? provider.webUrl;\n    } else if (platform === 'Android') {\n      return provider.googlePlayStoreUrl ?? this.getBrowserUrl(provider) ?? provider.webUrl;\n    } else {\n      return this.getBrowserUrl(provider) ?? provider.webUrl ?? this.getMobileUrl(provider);\n    }\n  }\n\n  render() {\n    const browser = getBrowser();\n    const mobile = getPlatform();\n\n    const notInstalledProviders = this.defaultProviders.filter(\n      p => this.installedProviders.findIndex(i => i.id === p.id) === -1 // keep providers NOT already in installed list\n    );\n\n    const hasInstalled = this.installedProviders.length > 0;\n    const hasMore = notInstalledProviders.length > 0;\n\n    return (\n      <div class=\"modal-container animate-in fade-in fixed inset-0 z-[8999] box-border flex h-full w-full items-end bg-[#00000040] md:items-center md:justify-center\">\n        <div class=\"fixed inset-0 z-[8999]\" onClick={() => this.handleCloseModal()} />\n        <div class=\"modal-body animate-in md:zoom-in-50 slide-in-from-bottom md:slide-in-from-bottom-0 z-[9000] box-border flex max-h-[calc(100%-24px)] w-full max-w-full cursor-default flex-col overflow-y-scroll rounded-2xl rounded-b-none bg-white p-6 text-sm leading-snug shadow-[0_4px_5px_0_#00000005,0_16px_40px_0_#00000014] md:max-h-[calc(100%-48px)] md:w-[400px] md:rounded-b-2xl\">\n          {/* INTRO */}\n          <div class=\"flex flex-col space-y-[10px]\">\n            <div class=\"flex items-center\">\n              <div class=\"flex-1 text-xl font-medium text-[#242629]\">Connect a wallet</div>\n              <button\n                class=\"rounded-full bg-transparent p-1 transition-colors hover:bg-gray-100 active:scale-95\"\n                onClick={() => this.handleCloseModal()}\n              >\n                <span class=\"sr-only\">Close popup</span>\n                <img src={CloseIcon} />\n              </button>\n            </div>\n            {hasInstalled ? (\n              <p>Select the wallet you want to connect to.</p>\n            ) : (\n              <p>\n                You don&apos;t have any wallets in your browser that support this app. You need to\n                install a wallet to proceed.\n              </p>\n            )}\n          </div>\n\n          {/* INSTALLED SECTION */}\n          {hasInstalled && (\n            <div class=\"mt-6\">\n              <p class=\"mb-4 text-sm font-medium\">Available wallets</p>\n              <ul class=\"space-y-3\">\n                {this.installedProviders.map((provider: WbipProvider, i: number) => (\n                  <li\n                    class=\"flex items-center gap-3 rounded-[10px] border border-[#EFEFF2] p-[14px]\"\n                    key={provider?.id ?? i}\n                  >\n                    <div class=\"aspect-square basis-9 overflow-hidden\">\n                      <img src={provider.icon} class=\"h-full w-full rounded-[10px] bg-gray-700\" />\n                    </div>\n                    <div class=\"flex-1\">\n                      <div class=\"text-sm font-medium text-[#242629]\">{provider.name}</div>\n                      {provider.webUrl && (\n                        <a href={provider.webUrl} class=\"text-sm\" rel=\"noopener noreferrer\">\n                          {new URL(provider.webUrl).hostname}\n                        </a>\n                      )}\n                    </div>\n                    <button\n                      class=\"rounded-[10px] border border-[#333] bg-[#323232] px-4 py-2 text-sm font-medium text-[#EFEFEF] shadow-[0_1px_2px_0_#0000000A] outline-[#FFBD7A] transition-all hover:bg-[#0C0C0D] hover:text-white hover:shadow-[0_8px_16px_0_#00000020] focus:outline focus:outline-[3px] active:scale-95\"\n                      onClick={() => this.handleSelectProvider(provider.id)}\n                    >\n                      Connect\n                    </button>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {/* RECOMMENDED SECTION */}\n          {hasMore && (\n            <div class=\"mt-6\">\n              {hasInstalled ? (\n                <p class=\"mb-4 text-sm font-medium\">Other wallets</p>\n              ) : (\n                <div class=\"mb-5 flex justify-between\">\n                  <p class=\"text-sm font-medium\">Recommended wallets</p>\n                  <a\n                    class=\"flex cursor-pointer items-center space-x-[5px] text-xs transition-colors hover:text-[#242629] hover:underline focus:underline\"\n                    href=\"https://docs.hiro.so/what-is-a-wallet\"\n                    rel=\"noopener noreferrer\"\n                    target=\"_blank\"\n                  >\n                    {/* QUESTION MARK ICON */}\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"14\"\n                      height=\"14\"\n                      viewBox=\"0 0 16 16\"\n                      fill=\"none\"\n                    >\n                      <path\n                        stroke=\"#74777D\"\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"1.2\"\n                        d=\"M8.006 15a7 7 0 1 0 0-14 7 7 0 0 0 0 14Z\"\n                      />\n                      <path\n                        stroke=\"#74777D\"\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"1.2\"\n                        d=\"M5.97 5.9a2.1 2.1 0 0 1 4.08.7c0 1.4-2.1 2.1-2.1 2.1M8.006 11.5h.01\"\n                      />\n                    </svg>\n                    <p>\n                      What is a wallet?&thinsp;<span class=\"align-text-bottom text-[9px]\">â†—</span>\n                    </p>\n                  </a>\n                </div>\n              )}\n              <ul class=\"space-y-3\">\n                {notInstalledProviders.map((provider: WbipProvider, i: number) => (\n                  <li\n                    class=\"flex items-center gap-3 rounded-[10px] border border-[#EFEFF2] p-[14px]\"\n                    key={provider?.id ?? i}\n                  >\n                    <div class=\"aspect-square basis-9 overflow-hidden\">\n                      <img src={provider.icon} class=\"h-full w-full rounded-[10px] bg-gray-700\" />\n                    </div>\n                    <div class=\"flex-1\">\n                      <div class=\"text-sm font-medium text-[#242629]\">{provider.name}</div>\n                      {provider.webUrl && (\n                        <a href={provider.webUrl} class=\"text-sm\" rel=\"noopener noreferrer\">\n                          {new URL(provider.webUrl).hostname}\n                        </a>\n                      )}\n                    </div>\n                    {this.getInstallUrl(provider, browser, mobile) && (\n                      <a\n                        class=\"rounded-[10px] border border-[#EFEFF2] px-4 py-2 text-sm font-medium shadow-[0_1px_2px_0_#0000000A] outline-[#FFBD7A] transition-colors hover:text-[#242629] hover:shadow-[0_1px_2px_0_#00000010] focus:outline focus:outline-[3px] active:scale-95\"\n                        href={this.getInstallUrl(provider, browser, mobile)}\n                        rel=\"noopener noreferrer\"\n                        target=\"_blank\"\n                      >\n                        {provider.id === 'AsignaProvider' ? 'Open' : 'Install'} &rarr;\n                      </a>\n                    )}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n"]}